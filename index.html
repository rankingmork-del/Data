<!DOCTYPE html>
<html>
<head>
    <title>BLAZIX S4 Live API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        body { font-family: Arial; margin: 20px; background: #0a0a0f; color: white; }
        .container { max-width: 800px; margin: auto; }
        .endpoint { background: #151522; padding: 15px; margin: 10px 0; border-radius: 8px; }
        button { background: #8b3bff; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; }
        pre { background: #1a1a1a; padding: 15px; border-radius: 5px; overflow: auto; }
        .live-badge { background: #00ff88; color: black; padding: 3px 8px; border-radius: 10px; font-size: 12px; margin-left: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¯ BLAZIX S4 LIVE API <span class="live-badge">LIVE DATA</span></h1>
        
        <div class="endpoint">
            <h3>GET /api/current</h3>
            <button onclick="fetchLiveData('current')">Get Current Prediction</button>
            <div id="result-current"></div>
        </div>
        
        <div class="endpoint">
            <h3>GET /api/stats</h3>
            <button onclick="fetchLiveData('stats')">Get Statistics</button>
            <div id="result-stats"></div>
        </div>
        
        <div class="endpoint">
            <h3>GET /api/all</h3>
            <button onclick="fetchLiveData('all')">Get All Data</button>
            <div id="result-all"></div>
        </div>
        
        <div class="endpoint">
            <h3>Direct JSON Links:</h3>
            <p><a href="/Data/api/current.json" target="_blank">/Data/api/current.json</a></p>
            <p><a href="/Data/api/stats.json" target="_blank">/Data/api/stats.json</a></p>
            <p><a href="/Data/api/all.json" target="_blank">/Data/api/all.json</a></p>
        </div>
    </div>

    <script>
        const API_URL = "https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json";
        
        async function fetchLiveData(type) {
            try {
                // Fetch real lottery data
                const response = await axios.get(`${API_URL}?t=${Date.now()}`);
                const lotteryData = response.data.data.list;
                
                // Apply your custom logic
                const numbers = lotteryData.map(x => parseInt(x.number));
                const prediction = calculatePrediction(numbers);
                
                let result;
                
                switch(type) {
                    case 'current':
                        result = {
                            period: lotteryData[0].issueNumber,
                            prediction: prediction.prediction,
                            derived_number: prediction.derivedNumber,
                            confidence: prediction.confidence,
                            status: "live",
                            timestamp: new Date().toISOString(),
                            last_10_numbers: numbers.slice(0, 10)
                        };
                        break;
                        
                    case 'stats':
                        // You would need to track this in localStorage
                        const stats = getStatistics();
                        result = stats;
                        break;
                        
                    case 'all':
                        result = {
                            current_prediction: {
                                period: lotteryData[0].issueNumber,
                                prediction: prediction.prediction,
                                derived_number: prediction.derivedNumber,
                                confidence: prediction.confidence
                            },
                            previous_results: lotteryData.slice(0, 8).map(item => ({
                                period: item.issueNumber.slice(-4),
                                number: item.number,
                                result: parseInt(item.number) >= 5 ? "BIG" : "SMALL"
                            })),
                            timestamp: new Date().toISOString()
                        };
                        break;
                }
                
                // Display result
                document.getElementById(`result-${type}`).innerHTML = 
                    `<pre>${JSON.stringify(result, null, 2)}</pre>`;
                    
                // Also update the JSON file (this would need a server)
                console.log('Live data fetched:', result);
                
            } catch (error) {
                document.getElementById(`result-${type}`).innerHTML = 
                    `<pre style="color:red">Error: ${error.message}</pre>`;
            }
        }
        
        function calculatePrediction(numbers) {
            // Your custom logic
            if (numbers.length < 10) return { prediction: "BIG", derivedNumber: 7, confidence: 70 };
            
            const last10 = numbers.slice(0, 10);
            const first = last10[0];
            const fifth = last10[4];
            let sum = first + fifth;
            
            if (sum >= 10) sum = Math.floor(sum/10) + (sum%10);
            
            const last = last10[9];
            let result = sum - last;
            if (result < 0) result = -result;
            if (result >= 10) result = Math.floor(result/10) + (result%10);
            
            return {
                prediction: result >= 5 ? "BIG" : "SMALL",
                derivedNumber: result,
                confidence: 70 + Math.abs(result - 4.5) * 5
            };
        }
        
        function getStatistics() {
            // Get from localStorage or calculate
            const stored = localStorage.getItem('blazix_stats') || '{"total_win":35,"total_loss":12}';
            return JSON.parse(stored);
        }
    </script>
</body>
</html>
